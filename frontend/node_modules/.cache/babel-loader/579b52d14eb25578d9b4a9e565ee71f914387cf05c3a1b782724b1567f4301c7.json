{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\gallery\\\\frontend\\\\src\\\\components\\\\Allphotos.js\",\n  _s = $RefreshSig$();\nimport { useNavigate } from \"react-router-dom\";\nimport { useEffect, useRef } from \"react\";\nimport { useRecoilValue } from \"recoil\";\nimport { userState } from \"../store/atoms/UserState\";\nimport axios from \"axios\";\nimport ErrorPage from \"./ErrorPage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Allphotos = () => {\n  _s();\n  const userValue = useRecoilValue(userState);\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (!localStorage.getItem(\"token\")) {\n      navigate('/signup');\n    }\n  }, [navigate]);\n  const cloudinaryRef = useRef();\n  const widgetref = useRef();\n  useEffect(() => {\n    cloudinaryRef.current = window.cloudinary;\n    widgetref.current = cloudinaryRef.current.createUploadWidget({\n      cloudName: \"dli5g7kbs\",\n      uploadPreset: \"ltcyvgkv\"\n    }, function (err, result) {\n      const apiUrl = 'http://localhost:3000/photos';\n      const headers = {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + localStorage.getItem(\"token\")\n      };\n      const imglink = result.info.secure_url;\n      const posty = async () => {\n        try {\n          const response = await axios.post(apiUrl, {\n            img: imglink\n          }, {\n            headers: headers\n          });\n          console.log(\"1\");\n        } catch (e) {\n          /*#__PURE__*/_jsxDEV(ErrorPage, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 35,\n            columnNumber: 13\n          }, this);\n        }\n      };\n      posty();\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => {\n        widgetref.current.open();\n      },\n      children: \"upload\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 5\n    }, this)\n  }, void 0, false);\n};\n_s(Allphotos, \"BVpaLI3nbRdqJPrMwqqkfQSIDCA=\", false, function () {\n  return [useRecoilValue, useNavigate];\n});\n_c = Allphotos;\nexport default Allphotos;\nvar _c;\n$RefreshReg$(_c, \"Allphotos\");","map":{"version":3,"names":["useNavigate","useEffect","useRef","useRecoilValue","userState","axios","ErrorPage","jsxDEV","_jsxDEV","Fragment","_Fragment","Allphotos","_s","userValue","navigate","localStorage","getItem","cloudinaryRef","widgetref","current","window","cloudinary","createUploadWidget","cloudName","uploadPreset","err","result","apiUrl","headers","imglink","info","secure_url","posty","response","post","img","console","log","e","fileName","_jsxFileName","lineNumber","columnNumber","children","onClick","open","_c","$RefreshReg$"],"sources":["C:/Users/user/gallery/frontend/src/components/Allphotos.js"],"sourcesContent":["import { useNavigate } from \"react-router-dom\";\r\nimport { useEffect,useRef } from \"react\";\r\nimport { useRecoilValue } from \"recoil\";\r\nimport { userState } from \"../store/atoms/UserState\";\r\nimport axios from \"axios\";\r\nimport ErrorPage from \"./ErrorPage\";\r\nconst Allphotos=()=>{\r\n  const userValue=useRecoilValue(userState);\r\n    const navigate = useNavigate();\r\n    useEffect(() => {\r\n      if (!localStorage.getItem(\"token\")) {\r\n        navigate('/signup');\r\n      }\r\n    }, [navigate]);\r\n    const cloudinaryRef=useRef();\r\n    const widgetref=useRef();\r\n    useEffect(()=>{\r\n      cloudinaryRef.current=window.cloudinary;\r\n      widgetref.current=cloudinaryRef.current.createUploadWidget({\r\n        cloudName:\"dli5g7kbs\",\r\n        uploadPreset:\"ltcyvgkv\",\r\n      },function (err,result){\r\n        const apiUrl = 'http://localhost:3000/photos';\r\n        const headers = {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': 'Bearer '+localStorage.getItem(\"token\"),\r\n        };\r\n        const imglink=result.info.secure_url;\r\n        const posty=async()=>{\r\n        try{\r\n            const response = await axios.post(apiUrl,{img:imglink},{ headers: headers });\r\n            console.log(\"1\");\r\n          }\r\n          catch(e){\r\n            <ErrorPage></ErrorPage>\r\n          }\r\n        }\r\n        posty();\r\n      })\r\n    },[]);\r\n    return (<>\r\n    <button onClick={()=>{widgetref.current.open()}}>upload</button>\r\n    </>)\r\n}\r\nexport default Allphotos;"],"mappings":";;AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,SAAS,EAACC,MAAM,QAAQ,OAAO;AACxC,SAASC,cAAc,QAAQ,QAAQ;AACvC,SAASC,SAAS,QAAQ,0BAA0B;AACpD,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,SAAS,MAAM,aAAa;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AACpC,MAAMC,SAAS,GAACA,CAAA,KAAI;EAAAC,EAAA;EAClB,MAAMC,SAAS,GAACV,cAAc,CAACC,SAAS,CAAC;EACvC,MAAMU,QAAQ,GAAGd,WAAW,CAAC,CAAC;EAC9BC,SAAS,CAAC,MAAM;IACd,IAAI,CAACc,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,EAAE;MAClCF,QAAQ,CAAC,SAAS,CAAC;IACrB;EACF,CAAC,EAAE,CAACA,QAAQ,CAAC,CAAC;EACd,MAAMG,aAAa,GAACf,MAAM,CAAC,CAAC;EAC5B,MAAMgB,SAAS,GAAChB,MAAM,CAAC,CAAC;EACxBD,SAAS,CAAC,MAAI;IACZgB,aAAa,CAACE,OAAO,GAACC,MAAM,CAACC,UAAU;IACvCH,SAAS,CAACC,OAAO,GAACF,aAAa,CAACE,OAAO,CAACG,kBAAkB,CAAC;MACzDC,SAAS,EAAC,WAAW;MACrBC,YAAY,EAAC;IACf,CAAC,EAAC,UAAUC,GAAG,EAACC,MAAM,EAAC;MACrB,MAAMC,MAAM,GAAG,8BAA8B;MAC7C,MAAMC,OAAO,GAAG;QACd,cAAc,EAAE,kBAAkB;QAClC,eAAe,EAAE,SAAS,GAACb,YAAY,CAACC,OAAO,CAAC,OAAO;MACzD,CAAC;MACD,MAAMa,OAAO,GAACH,MAAM,CAACI,IAAI,CAACC,UAAU;MACpC,MAAMC,KAAK,GAAC,MAAAA,CAAA,KAAS;QACrB,IAAG;UACC,MAAMC,QAAQ,GAAG,MAAM5B,KAAK,CAAC6B,IAAI,CAACP,MAAM,EAAC;YAACQ,GAAG,EAACN;UAAO,CAAC,EAAC;YAAED,OAAO,EAAEA;UAAQ,CAAC,CAAC;UAC5EQ,OAAO,CAACC,GAAG,CAAC,GAAG,CAAC;QAClB,CAAC,CACD,OAAMC,CAAC,EAAC;UACN,aAAA9B,OAAA,CAACF,SAAS;YAAAiC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAY,CAAC;QACzB;MACF,CAAC;MACDV,KAAK,CAAC,CAAC;IACT,CAAC,CAAC;EACJ,CAAC,EAAC,EAAE,CAAC;EACL,oBAAQxB,OAAA,CAAAE,SAAA;IAAAiC,QAAA,eACRnC,OAAA;MAAQoC,OAAO,EAAEA,CAAA,KAAI;QAAC1B,SAAS,CAACC,OAAO,CAAC0B,IAAI,CAAC,CAAC;MAAA,CAAE;MAAAF,QAAA,EAAC;IAAM;MAAAJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ;EAAC,gBAC9D,CAAC;AACP,CAAC;AAAA9B,EAAA,CArCKD,SAAS;EAAA,QACGR,cAAc,EACXH,WAAW;AAAA;AAAA8C,EAAA,GAF1BnC,SAAS;AAsCf,eAAeA,SAAS;AAAC,IAAAmC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}