{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\gallery\\\\frontend\\\\src\\\\components\\\\Allphotos.js\",\n  _s = $RefreshSig$();\nimport { useNavigate } from \"react-router-dom\";\nimport { useEffect, useRef } from \"react\";\nimport axios from \"axios\";\nimport ErrorPage from \"./ErrorPage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Allphotos = () => {\n  _s();\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (!localStorage.getItem(\"token\")) {\n      navigate('/signup');\n    }\n  }, [navigate]);\n  const cloudinaryRef = useRef();\n  const widgetref = useRef();\n  if (localStorage.getItem(\"token\")) {\n    useEffect(() => {\n      cloudinaryRef.current = window.cloudinary;\n      widgetref.current = cloudinaryRef.current.createUploadWidget({\n        cloudName: \"dli5g7kbs\",\n        uploadPreset: \"ltcyvgkv\"\n      }, function (err, result) {\n        const apiUrl = 'http://localhost:3000/upload';\n        const headers = {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + localStorage.getItem(\"token\")\n        };\n        const imglink = result.info.secure_url;\n        const posty = async () => {\n          console.log(posty);\n          try {\n            const response = await axios.post(apiUrl, {\n              img: imglink\n            }, {\n              headers: headers\n            });\n            console.log(\"1\", imglink);\n          } catch (e) {\n            /*#__PURE__*/_jsxDEV(ErrorPage, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 35,\n              columnNumber: 13\n            }, this);\n          }\n        };\n        posty();\n      });\n    }, []);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => {\n        widgetref.current.open();\n      },\n      children: \"upload\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }, this)\n  }, void 0, false);\n};\n_s(Allphotos, \"Z6lPzDh/x/UJY1Ix9wx3gUMSouI=\", false, function () {\n  return [useNavigate];\n});\n_c = Allphotos;\nexport default Allphotos;\nvar _c;\n$RefreshReg$(_c, \"Allphotos\");","map":{"version":3,"names":["useNavigate","useEffect","useRef","axios","ErrorPage","jsxDEV","_jsxDEV","Fragment","_Fragment","Allphotos","_s","navigate","localStorage","getItem","cloudinaryRef","widgetref","current","window","cloudinary","createUploadWidget","cloudName","uploadPreset","err","result","apiUrl","headers","imglink","info","secure_url","posty","console","log","response","post","img","e","fileName","_jsxFileName","lineNumber","columnNumber","children","onClick","open","_c","$RefreshReg$"],"sources":["C:/Users/user/gallery/frontend/src/components/Allphotos.js"],"sourcesContent":["import { useNavigate } from \"react-router-dom\";\r\nimport { useEffect,useRef } from \"react\";\r\nimport axios from \"axios\";\r\nimport ErrorPage from \"./ErrorPage\";\r\nconst Allphotos=()=>{\r\n    const navigate = useNavigate();\r\n    useEffect(() => {\r\n      if (!localStorage.getItem(\"token\")) {\r\n        navigate('/signup');\r\n      }\r\n    }, [navigate]);\r\n    const cloudinaryRef=useRef();\r\n    const widgetref=useRef();\r\n    if(localStorage.getItem(\"token\")){\r\n\r\n      useEffect(()=>{\r\n        cloudinaryRef.current=window.cloudinary;\r\n        widgetref.current=cloudinaryRef.current.createUploadWidget({\r\n        cloudName:\"dli5g7kbs\",\r\n        uploadPreset:\"ltcyvgkv\",\r\n      },function (err,result){\r\n        const apiUrl = 'http://localhost:3000/upload';\r\n        const headers = {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': 'Bearer '+localStorage.getItem(\"token\"),\r\n        };\r\n        const imglink=result.info.secure_url;\r\n        const posty=async()=>{\r\n          console.log(posty);\r\n          try{\r\n            const response = await axios.post(apiUrl,{img:imglink},{ headers: headers });\r\n            console.log(\"1\",imglink);\r\n          }\r\n          catch(e){\r\n            <ErrorPage></ErrorPage>\r\n          }\r\n        }\r\n        posty();\r\n      })\r\n    },[]);\r\n  }\r\n    return (<>\r\n    <button onClick={()=>{widgetref.current.open()}}>upload</button>\r\n    </>)\r\n}\r\nexport default Allphotos;"],"mappings":";;AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,SAAS,EAACC,MAAM,QAAQ,OAAO;AACxC,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,SAAS,MAAM,aAAa;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AACpC,MAAMC,SAAS,GAACA,CAAA,KAAI;EAAAC,EAAA;EAChB,MAAMC,QAAQ,GAAGX,WAAW,CAAC,CAAC;EAC9BC,SAAS,CAAC,MAAM;IACd,IAAI,CAACW,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,EAAE;MAClCF,QAAQ,CAAC,SAAS,CAAC;IACrB;EACF,CAAC,EAAE,CAACA,QAAQ,CAAC,CAAC;EACd,MAAMG,aAAa,GAACZ,MAAM,CAAC,CAAC;EAC5B,MAAMa,SAAS,GAACb,MAAM,CAAC,CAAC;EACxB,IAAGU,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,EAAC;IAE/BZ,SAAS,CAAC,MAAI;MACZa,aAAa,CAACE,OAAO,GAACC,MAAM,CAACC,UAAU;MACvCH,SAAS,CAACC,OAAO,GAACF,aAAa,CAACE,OAAO,CAACG,kBAAkB,CAAC;QAC3DC,SAAS,EAAC,WAAW;QACrBC,YAAY,EAAC;MACf,CAAC,EAAC,UAAUC,GAAG,EAACC,MAAM,EAAC;QACrB,MAAMC,MAAM,GAAG,8BAA8B;QAC7C,MAAMC,OAAO,GAAG;UACd,cAAc,EAAE,kBAAkB;UAClC,eAAe,EAAE,SAAS,GAACb,YAAY,CAACC,OAAO,CAAC,OAAO;QACzD,CAAC;QACD,MAAMa,OAAO,GAACH,MAAM,CAACI,IAAI,CAACC,UAAU;QACpC,MAAMC,KAAK,GAAC,MAAAA,CAAA,KAAS;UACnBC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;UAClB,IAAG;YACD,MAAMG,QAAQ,GAAG,MAAM7B,KAAK,CAAC8B,IAAI,CAACT,MAAM,EAAC;cAACU,GAAG,EAACR;YAAO,CAAC,EAAC;cAAED,OAAO,EAAEA;YAAQ,CAAC,CAAC;YAC5EK,OAAO,CAACC,GAAG,CAAC,GAAG,EAACL,OAAO,CAAC;UAC1B,CAAC,CACD,OAAMS,CAAC,EAAC;YACN,aAAA7B,OAAA,CAACF,SAAS;cAAAgC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAY,CAAC;UACzB;QACF,CAAC;QACDV,KAAK,CAAC,CAAC;MACT,CAAC,CAAC;IACJ,CAAC,EAAC,EAAE,CAAC;EACP;EACE,oBAAQvB,OAAA,CAAAE,SAAA;IAAAgC,QAAA,eACRlC,OAAA;MAAQmC,OAAO,EAAEA,CAAA,KAAI;QAAC1B,SAAS,CAACC,OAAO,CAAC0B,IAAI,CAAC,CAAC;MAAA,CAAE;MAAAF,QAAA,EAAC;IAAM;MAAAJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ;EAAC,gBAC9D,CAAC;AACP,CAAC;AAAA7B,EAAA,CAxCKD,SAAS;EAAA,QACMT,WAAW;AAAA;AAAA2C,EAAA,GAD1BlC,SAAS;AAyCf,eAAeA,SAAS;AAAC,IAAAkC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}